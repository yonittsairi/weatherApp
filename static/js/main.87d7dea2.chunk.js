(this.webpackJsonptasker=this.webpackJsonptasker||[]).push([[0],{55:function(e,t,a){},56:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),c=a.n(r),s=a(18),i=a.n(s),o=(a(55),a.p,a(56),a(5)),u=a(3),l=a.n(u),f=a(8),v=a(24),d=a(25),p=a(27),h=a(26),j=a(20),b=a.n(j),g={load:function(e){var t=localStorage.getItem(e);return JSON.parse(t)},save:function(e,t){var a=JSON.stringify(t);localStorage.setItem(e,a)},store:function(e,t){sessionStorage[e]=JSON.stringify(t)},clear:function(){sessionStorage.clear()}};var O={getCities:function(e){return x.apply(this,arguments)},getCitiesByID:function(e){return y.apply(this,arguments)},getForecast:function(e){return w.apply(this,arguments)},getCityByCoords:function(e){return F.apply(this,arguments)}};window.taskService=O;var m={"Content-Type":"*"};function x(){return(x=Object(f.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=a6G5iYMGG7hF7iiEnGgh41oa4pANsd46&q=".concat(t),e.prev=1,e.next=4,b.a.get("".concat(a),{headers:m});case 4:return n=e.sent,console.log(n.data),e.next=8,g.save("search",n.data);case 8:return e.abrupt("return",n.data);case 11:throw e.prev=11,e.t0=e.catch(1),e.t0;case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function y(){return(y=Object(f.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),a="https://dataservice.accuweather.com/locations/v1/".concat(t,"?apikey=a6G5iYMGG7hF7iiEnGgh41oa4pANsd46"),e.prev=2,e.next=5,b.a.get("".concat(a));case 5:return n=e.sent,console.log(n.data),e.next=9,g.save("FAVLIST",n.data);case 9:return e.abrupt("return",n.data);case 12:throw e.prev=12,e.t0=e.catch(2),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function w(){return(w=Object(f.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,b.a.get("https://dataservice.accuweather.com/forecasts/v1/daily/5day/".concat(t,"?apikey=a6G5iYMGG7hF7iiEnGgh41oa4pANsd46&language=en-us&details=false&metric=false"));case 4:return a=e.sent,e.next=7,g.save("forecast",a.data);case 7:return e.abrupt("return",a.data);case 10:return e.prev=10,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",g.load("forecast"));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function F(){return(F=Object(f.a)(l.a.mark((function e(t){var a,n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),a=t.coords,n=a.latitude,r=a.longitude,console.log(n,r),e.prev=3,e.next=6,b.a.get("https://dataservice.accuweather.com/locations/v1/cities/geoposition/search?apikey=a6G5iYMGG7hF7iiEnGgh41oa4pANsd46&q=".concat(n,",").concat(r));case 6:return c=e.sent,e.abrupt("return",c.data.Key);case 10:throw e.prev=10,e.t0=e.catch(3),console.log(e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function C(e){var t=e.cities,a=e.loadCity;return t?t.map((function(e,t){return Object(n.jsxs)("li",{className:"flex align-center",onClick:function(){return a(e.Key,e.LocalizedName)},children:[e.LocalizedName,",",e.Country.LocalizedName]},e.Key+e.LocalizedName)})):null}var N={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e)+e)},dateFormatter:function(e){var t=new Date(e).toString(),a=t.substring(0,3),r=t.substring(4,8),c=t.substring(8,10);t.substring(15,21);return Object(n.jsx)("section",{children:Object(n.jsxs)("b",{children:[" ",a+", "+r+c]})})},dateFormat:function(e){var t=new Date(e).toString(),a=t.substring(0,3),n=t.substring(4,8),r=t.substring(8,10);t.substring(15,21);return a+", "+n+r}};var k=a(43),S=a.n(k),I=a(44),M=a.n(I);function D(e){var t=e.cityWeather.DailyForecasts;return console.log(t),t?t.map((function(t,a){if(+t.Night.Icon<10)var r="0";else r="";if(+t.Day.Icon<10)var c="0";else c="";var s=N.dateFormatter(t.Date),i=(5*(t.Temperature.Minimum.Value-32)/9).toFixed(0),o=(5*(t.Temperature.Maximum.Value-32)/9).toFixed(0);return Object(n.jsxs)("li",{className:"card flex column align-center",children:[Object(n.jsxs)("div",{className:"flex column align-center",children:[Object(n.jsx)("span",{children:s}),Object(n.jsxs)("span",{className:"flex  align-center space-between",children:[Object(n.jsx)(S.a,{}),Object(n.jsx)("span",{children:t.Day.IconPhrase})]}),Object(n.jsx)("img",{src:"https://developer.accuweather.com/sites/default/files/".concat(c).concat(t.Day.Icon,"-s.png")})]}),Object(n.jsxs)("div",{className:"card flex column align-center",children:[Object(n.jsxs)("span",{className:"flex align-center space-between",children:[Object(n.jsx)(M.a,{}),Object(n.jsx)("span",{children:t.Night.IconPhrase})]}),Object(n.jsx)("img",{src:"https://developer.accuweather.com/sites/default/files/".concat(r).concat(t.Night.Icon,"-s.png")}),e.celcious&&Object(n.jsxs)("span",{children:[i," -  ",o,"  ",Object(n.jsx)("span",{children:"\u2103"})]}),!e.celcious&&Object(n.jsxs)("span",{children:[t.Temperature.Minimum.Value," -  ",t.Temperature.Maximum.Value,"  ",Object(n.jsx)("span",{children:" \u2109"})]})]})]},t.Date)})):null}var A=a(30),E=a.n(A),L=a(29),G=a.n(L),B={removeFav:function(e){return T.apply(this,arguments)},addFav:function(e){return _.apply(this,arguments)},query:function(){return V.apply(this,arguments)}};function V(){return(V=Object(f.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.load("favoriteCities");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(f.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.load("favoriteCities");case 2:if(a=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:a=a.filter((function(e){return e!==t}));case 8:return console.log(a),g.save("favoriteCities",a),e.abrupt("return",t);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(f.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.load("favoriteCities");case 2:return(a=e.sent)?a.push(t):(a=[]).push(t),g.save("favoriteCities",a),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return console.log("actions remove",e),function(t){B.removeFav(e).then((function(){t({type:"REMOVE_FAV",favId:e})}))}}function J(e){return console.log(e,"actions add"),function(t){B.addFav(e).then((function(e){t({type:"ADD_FAV",fav:e})}))}}window.favService=B;var P=a(19),R=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(v.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={cityWeather:{},cities:[],currCityId:"",isFav:!1,curCityname:"",celcious:!0},e.log=function(){var t=Object(f.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.getCityByCoords(a);case 2:(n=t.sent)?e.loadCity(n):e.loadCity(215854);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.loadCity=function(){var t=Object(f.a)(l.a.mark((function t(a){var n,r,c,s,i=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"TLV",t.next=3,O.getForecast(a);case 3:return r=t.sent,console.log(r),c=e.props.favs,s=c.includes(a),t.next=9,e.setState(Object(o.a)(Object(o.a)({},e.state),{},{cities:[],cityWeather:r,currCityId:a,isFav:s,curCityname:n}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(){var t=Object(f.a)(l.a.mark((function t(a){var n,r,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.target.value,r=n,t.next=4,O.getCities(r);case 4:return c=t.sent,t.next=7,e.setState({cities:c});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.toggleFavorite=function(t){e.props.favs.includes(t)?(console.log("remove"),e.props.removeFav(t)):e.props.addFav(t),e.setState(Object(o.a)(Object(o.a)({},e.state),{},{isFav:!e.state.isFav}))},e.changFormat=function(){e.setState(Object(o.a)(Object(o.a)({},e.state),{},{celcious:!e.state.celcious}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.loadCity(215854),navigator.geolocation.getCurrentPosition(this.log)}},{key:"render",value:function(){var e=this,t=this.state,a=t.cities,r=t.cityWeather,c=t.currCityId,s=t.isFav,i=t.curCityname,o=t.celcious;return r?Object(n.jsxs)("div",{children:[Object(n.jsx)("button",{className:"format",onClick:this.changFormat,children:" \u2109 /  \u2103"}),Object(n.jsxs)("div",{className:"flex column align-center",children:[Object(n.jsxs)("label",{htmlFor:"title",className:"",children:[" ",Object(n.jsx)("input",{type:"text",placeholder:"Search",className:"title",name:"title",onChange:this.handleChange})]}),a.length>0&&Object(n.jsxs)("ul",{className:"cities",children:[" ",Object(n.jsx)(C,{cities:a,loadCity:this.loadCity})]})]}),Object(n.jsx)("h1",{children:i}),!s&&Object(n.jsx)(G.a,{onClick:function(){return e.toggleFavorite(c)}}),s&&Object(n.jsx)(E.a,{onClick:function(){return e.toggleFavorite(c)}}),Object(n.jsxs)("ul",{className:"card-grid ",children:[" ",Object(n.jsx)(D,{cityWeather:r,celcious:o})]})]}):Object(n.jsx)("label",{children:"load"})}}]),a}(r.Component),W={addFav:J,removeFav:z},K=Object(P.b)((function(e){return{favs:e.favsModule.favs}}),W)(R),Y=a(16);function q(){return Object(n.jsxs)("header",{className:"main-header flex align-center space-between",children:[Object(n.jsxs)(Y.b,{to:"/",children:["    ",Object(n.jsx)("div",{className:"fs30 logo",children:"Weathter"}),"    "]}),Object(n.jsx)("nav",{className:"flex align-center space-between ",children:Object(n.jsxs)("ul",{className:"header-list flex align-center clean-list",children:[Object(n.jsxs)(Y.b,{to:"/favorite",children:["  ",Object(n.jsx)("li",{className:"header-link",children:"Favorite"})]}),Object(n.jsxs)(Y.b,{to:"/",children:["    ",Object(n.jsx)("li",{className:"header-link",children:"Home"})]})]})})]})}var U=a(4),X=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(v.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={favList:[]},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getfavs()}},{key:"getfavs",value:function(){var e=Object(f.a)(l.a.mark((function e(){var t,a,n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.favs,a=this.state.favList,n=a,r=0;case 4:if(!(r<=t.length-1)){e.next=13;break}return console.log(t[r]),e.next=8,O.getCitiesByID(t[r]);case 8:c=e.sent,n.push(c);case 10:r++,e.next=4;break;case 13:this.setState({favList:n});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.favList;if(e.length<1)return null;var t=e.map((function(e,t){return Object(n.jsxs)("li",{className:"flex justify-center",children:[e.LocalizedName,",",e.Country.LocalizedName]},e.Key+e.LocalizedName)}));return Object(n.jsx)("div",{children:t})}}]),a}(r.Component),H={addFav:J,removeFav:z},Q=Object(P.b)((function(e){return{favs:e.favsModule.favs}}),H)(X);var Z=function(){return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(q,{}),Object(n.jsxs)(U.c,{children:[Object(n.jsx)(U.a,{component:Q,path:"/favorite"}),Object(n.jsx)(U.a,{component:K,path:"/"})]})]})},$=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,99)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))},ee=a(47),te=a(17),ae=a(48),ne=g.load("favoriteCities")||[];sessionStorage.loggedinUser&&JSON.parse(sessionStorage.loggedinUser);var re={favs:ne};var ce=Object(te.c)({favsModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FAVS":return Object(o.a)(Object(o.a)({},e),{},{favs:t.favs});case"EDIT_FAV":var a=e.favs.map((function(e){return e._id===t.fav._id?t.fav:e}));return console.log(a),Object(o.a)(Object(o.a)({},e),{},{favs:a});case"ADD_FAV":return console.log("adding  fav",t.fav),e=Object(o.a)(Object(o.a)({},e),{},{favs:[].concat(Object(ae.a)(e.favs),[t.fav])});case"FILTER":var n=new RegExp(t.filterBy.text,"i");return e="All"===t.filterBy.type&&""===t.filterBy.text?Object(o.a)(Object(o.a)({},e),{},{favs:ne,filterBy:t.filterBy}):Object(o.a)(Object(o.a)({},e),{},{favs:ne.filter((function(e){return n.test(e.name)&&e.inStock===t.filterBy.type&&e.type===t.filterBy.type})),filterBy:t.filterBy});case"REMOVE_FAV":return console.log("removing  fav",t.fav),e=Object(o.a)(Object(o.a)({},e),{},{favs:e.favs.filter((function(e){return e!==t.favId}))});default:return e}}}),se=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||te.d,ie=Object(te.e)(ce,se(Object(te.a)(ee.a)));i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(Y.a,{children:Object(n.jsx)(P.a,{store:ie,children:Object(n.jsx)(Z,{})})})}),document.getElementById("root")),$()}},[[87,1,2]]]);
//# sourceMappingURL=main.87d7dea2.chunk.js.map