(this.webpackJsonptasker=this.webpackJsonptasker||[]).push([[0],{55:function(e,t,a){},56:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),c=a.n(r),s=a(18),i=a.n(s),o=(a(55),a.p,a(56),a(3)),u=a.n(o),l=a(5),f=a(9),v=a(23),d=a(24),h=a(26),p=a(25),j=a(27),b=a.n(j),O={load:function(e){var t=localStorage.getItem(e);return JSON.parse(t)},save:function(e,t){var a=JSON.stringify(t);localStorage.setItem(e,a)},store:function(e,t){sessionStorage[e]=JSON.stringify(t)},clear:function(){sessionStorage.clear()}};var g={getCities:function(e){return x.apply(this,arguments)},getCitiesByID:function(e){return y.apply(this,arguments)},getForecast:function(e){return F.apply(this,arguments)}};window.taskService=g;var m={"Content-Type":"*"};function x(){return(x=Object(f.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="http://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=a6G5iYMGG7hF7iiEnGgh41oa4pANsd46&q=".concat(t),e.prev=1,e.next=4,b.a.get("".concat(a),{headers:m});case 4:return n=e.sent,console.log(n.data),e.next=8,O.save("search",n.data);case 8:return e.abrupt("return",n.data);case 11:throw e.prev=11,e.t0=e.catch(1),e.t0;case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function y(){return(y=Object(f.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),a="http://dataservice.accuweather.com/locations/v1/".concat(t,"?apikey=a6G5iYMGG7hF7iiEnGgh41oa4pANsd46"),e.prev=2,e.next=5,b.a.get("".concat(a),{headers:m});case 5:return n=e.sent,console.log(n.data),e.next=9,O.save("FAVLIST",n.data);case 9:return e.abrupt("return",n.data);case 12:throw e.prev=12,e.t0=e.catch(2),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function F(){return(F=Object(f.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,b.a.get("http://dataservice.accuweather.com/forecasts/v1/daily/5day/".concat(t,"?apikey=a6G5iYMGG7hF7iiEnGgh41oa4pANsd46"));case 4:return a=e.sent,e.next=7,O.save("forecast",a.data);case 7:return e.abrupt("return",a.data);case 10:return e.prev=10,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",O.load("forecast"));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function w(e){var t=e.cities,a=e.loadCity;return t?t.map((function(e,t){return Object(n.jsxs)("li",{className:"flex align-center",onClick:function(){return a(e.Key,e.LocalizedName)},children:[e.LocalizedName,",",e.Country.LocalizedName]},e.Key+e.LocalizedName)})):null}var N={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e)+e)},dateFormatter:function(e){var t=new Date(e).toString(),a=t.substring(0,3),r=t.substring(4,8),c=t.substring(8,10);t.substring(15,21);return Object(n.jsx)("section",{children:Object(n.jsxs)("b",{children:[" ",a+", "+r+c]})})},dateFormat:function(e){var t=new Date(e).toString(),a=t.substring(0,3),n=t.substring(4,8),r=t.substring(8,10);t.substring(15,21);return a+", "+n+r}};var C=a(43),k=a.n(C),S=a(44),I=a.n(S);function D(e){var t=e.cityWeather.DailyForecasts;return console.log(t),t?t.map((function(t,a){if(+t.Night.Icon<10)var r="0";else r="";if(+t.Day.Icon<10)var c="0";else c="";var s=N.dateFormatter(t.Date),i=(5*(t.Temperature.Minimum.Value-32)/9).toFixed(0),o=(5*(t.Temperature.Maximum.Value-32)/9).toFixed(0);return Object(n.jsxs)("li",{className:"card flex column align-center",children:[Object(n.jsxs)("div",{className:"flex column align-center",children:[Object(n.jsx)("span",{children:s}),Object(n.jsxs)("span",{className:"flex  align-center space-between",children:[Object(n.jsx)(k.a,{}),Object(n.jsx)("span",{children:t.Day.IconPhrase})]}),Object(n.jsx)("img",{src:"https://developer.accuweather.com/sites/default/files/".concat(c).concat(t.Day.Icon,"-s.png")})]}),Object(n.jsxs)("div",{className:"card flex column align-center",children:[Object(n.jsxs)("span",{className:"flex align-center space-between",children:[Object(n.jsx)(I.a,{}),Object(n.jsx)("span",{children:t.Night.IconPhrase})]}),Object(n.jsx)("img",{src:"https://developer.accuweather.com/sites/default/files/".concat(r).concat(t.Night.Icon,"-s.png")}),e.celcious&&Object(n.jsxs)("span",{children:[i," -  ",o,"  ",Object(n.jsx)("span",{children:"\u2103"})]}),!e.celcious&&Object(n.jsxs)("span",{children:[t.Temperature.Minimum.Value," -  ",t.Temperature.Maximum.Value,"  ",Object(n.jsx)("span",{children:" \u2109"})]})]})]},t.Date)})):null}var M=a(30),A=a.n(M),E=a(29),L=a.n(E),V={removeFav:function(e){return _.apply(this,arguments)},addFav:function(e){return B.apply(this,arguments)},query:function(){return T.apply(this,arguments)}};function T(){return(T=Object(f.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.load("favoriteCities");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(f.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.load("favoriteCities");case 2:if(a=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:a=a.filter((function(e){return e!==t}));case 8:return console.log(a),O.save("favoriteCities",a),e.abrupt("return",t);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(f.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.load("favoriteCities");case 2:return(a=e.sent)?a.push(t):(a=[]).push(t),O.save("favoriteCities",a),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return console.log("actions remove",e),function(t){V.removeFav(e).then((function(){t({type:"REMOVE_FAV",favId:e})}))}}function z(e){return console.log(e,"actions add"),function(t){V.addFav(e).then((function(e){t({type:"ADD_FAV",fav:e})}))}}window.favService=V;var J=a(19),R=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(v.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={cityWeather:{},cities:[],currCityId:"",isFav:!1,curCityname:"",celcious:!0},e.loadCity=function(){var t=Object(f.a)(u.a.mark((function t(a){var n,r,c,s,i=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"TLV",t.next=3,g.getForecast(a);case 3:return r=t.sent,console.log(r),c=e.props.favs,s=c.includes(a),t.next=9,e.setState(Object(l.a)(Object(l.a)({},e.state),{},{cities:[],cityWeather:r,currCityId:a,isFav:s,curCityname:n}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(){var t=Object(f.a)(u.a.mark((function t(a){var n,r,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.target.value,r=n,t.next=4,g.getCities(r);case 4:return c=t.sent,t.next=7,e.setState({cities:c});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.toggleFavorite=function(t){e.props.favs.includes(t)?(console.log("remove"),e.props.removeFav(t)):e.props.addFav(t),e.setState(Object(l.a)(Object(l.a)({},e.state),{},{isFav:!e.state.isFav}))},e.changFormat=function(){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{celcious:!e.state.celcious}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.loadCity("215854")}},{key:"render",value:function(){var e=this,t=this.state,a=t.cities,r=t.cityWeather,c=t.currCityId,s=t.isFav,i=t.curCityname,o=t.celcious;return r?Object(n.jsxs)("div",{children:[Object(n.jsx)("button",{className:"format",onClick:this.changFormat,children:" \u2109 /  \u2103"}),Object(n.jsxs)("div",{className:"flex column align-center",children:[Object(n.jsxs)("label",{htmlFor:"title",className:"",children:[" ",Object(n.jsx)("input",{type:"text",placeholder:"Search",className:"title",name:"title",onChange:this.handleChange})]}),a.length>0&&Object(n.jsxs)("ul",{className:"cities",children:[" ",Object(n.jsx)(w,{cities:a,loadCity:this.loadCity})]})]}),Object(n.jsx)("h1",{children:i}),!s&&Object(n.jsx)(L.a,{onClick:function(){return e.toggleFavorite(c)}}),s&&Object(n.jsx)(A.a,{onClick:function(){return e.toggleFavorite(c)}}),Object(n.jsxs)("ul",{className:"card-grid ",children:[" ",Object(n.jsx)(D,{cityWeather:r,celcious:o})]})]}):Object(n.jsx)("label",{children:"load"})}}]),a}(r.Component),W={addFav:z,removeFav:G},P=Object(J.b)((function(e){return{favs:e.favsModule.favs}}),W)(R),K=a(16);function U(){return Object(n.jsxs)("header",{className:"main-header flex align-center space-between",children:[Object(n.jsxs)(K.b,{to:"/",children:["    ",Object(n.jsx)("div",{className:"fs30 logo",children:"Weathter"}),"    "]}),Object(n.jsx)("nav",{className:"flex align-center space-between ",children:Object(n.jsxs)("ul",{className:"header-list flex align-center clean-list",children:[Object(n.jsxs)(K.b,{to:"/favorite",children:["  ",Object(n.jsx)("li",{className:"header-link",children:"Favorite"})]}),Object(n.jsxs)(K.b,{to:"/",children:["    ",Object(n.jsx)("li",{className:"header-link",children:"Home"})]})]})})]})}var Y=a(4),q=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(v.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={favList:[]},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getfavs()}},{key:"getfavs",value:function(){var e=Object(f.a)(u.a.mark((function e(){var t,a,n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.favs,a=this.state.favList,n=a,r=0;case 4:if(!(r<=t.length-1)){e.next=13;break}return console.log(t[r]),e.next=8,g.getCitiesByID(t[r]);case 8:c=e.sent,n.push(c);case 10:r++,e.next=4;break;case 13:this.setState({favList:n});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.favList;if(e.length<1)return null;var t=e.map((function(e,t){return Object(n.jsxs)("li",{className:"flex justify-center",children:[e.LocalizedName,",",e.Country.LocalizedName]},e.Key+e.LocalizedName)}));return Object(n.jsx)("div",{children:t})}}]),a}(r.Component),X={addFav:z,removeFav:G},H=Object(J.b)((function(e){return{favs:e.favsModule.favs}}),X)(q);var Q=function(){return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(U,{}),Object(n.jsxs)(Y.c,{children:[Object(n.jsx)(Y.a,{component:H,path:"/favorite"}),Object(n.jsx)(Y.a,{component:P,path:"/"})]})]})},Z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,99)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))},$=a(47),ee=a(17),te=a(48),ae=O.load("favoriteCities")||[];sessionStorage.loggedinUser&&JSON.parse(sessionStorage.loggedinUser);var ne={favs:ae};var re=Object(ee.c)({favsModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FAVS":return Object(l.a)(Object(l.a)({},e),{},{favs:t.favs});case"EDIT_FAV":var a=e.favs.map((function(e){return e._id===t.fav._id?t.fav:e}));return console.log(a),Object(l.a)(Object(l.a)({},e),{},{favs:a});case"ADD_FAV":return console.log("adding  fav",t.fav),e=Object(l.a)(Object(l.a)({},e),{},{favs:[].concat(Object(te.a)(e.favs),[t.fav])});case"FILTER":var n=new RegExp(t.filterBy.text,"i");return e="All"===t.filterBy.type&&""===t.filterBy.text?Object(l.a)(Object(l.a)({},e),{},{favs:ae,filterBy:t.filterBy}):Object(l.a)(Object(l.a)({},e),{},{favs:ae.filter((function(e){return n.test(e.name)&&e.inStock===t.filterBy.type&&e.type===t.filterBy.type})),filterBy:t.filterBy});case"REMOVE_FAV":return console.log("removing  fav",t.fav),e=Object(l.a)(Object(l.a)({},e),{},{favs:e.favs.filter((function(e){return e!==t.favId}))});default:return e}}}),ce=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ee.d,se=Object(ee.e)(re,ce(Object(ee.a)($.a)));i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(K.a,{children:Object(n.jsx)(J.a,{store:se,children:Object(n.jsx)(Q,{})})})}),document.getElementById("root")),Z()}},[[87,1,2]]]);
//# sourceMappingURL=main.ca37a09c.chunk.js.map