(this.webpackJsonptasker=this.webpackJsonptasker||[]).push([[0],{55:function(e,t,a){},56:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),c=a.n(r),s=a(18),i=a.n(s),o=(a(55),a.p,a(56),a(3)),u=a.n(o),l=a(8),f=a(23),v=a(24),d=a(26),h=a(25),p=a(27),j=a.n(p),b={load:function(e){var t=localStorage.getItem(e);return JSON.parse(t)},save:function(e,t){var a=JSON.stringify(t);localStorage.setItem(e,a)},store:function(e,t){sessionStorage[e]=JSON.stringify(t)},clear:function(){sessionStorage.clear()}};var g={getCities:function(e){return m.apply(this,arguments)},getCitiesByID:function(e){return x.apply(this,arguments)},getForecast:function(e){return y.apply(this,arguments)}};window.taskService=g;var O={"Content-Type":"*"};function m(){return(m=Object(l.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="http://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=a6G5iYMGG7hF7iiEnGgh41oa4pANsd46&q=".concat(t),e.prev=1,e.next=4,j.a.get("".concat(a),{headers:O});case 4:return n=e.sent,console.log(n.data),e.next=8,b.save("search",n.data);case 8:return e.abrupt("return",n.data);case 11:throw e.prev=11,e.t0=e.catch(1),e.t0;case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function x(){return(x=Object(l.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),a="http://dataservice.accuweather.com/locations/v1/".concat(t,"?apikey=a6G5iYMGG7hF7iiEnGgh41oa4pANsd46"),e.prev=2,e.next=5,j.a.get("".concat(a),{headers:O});case 5:return n=e.sent,console.log(n.data),e.next=9,b.save("FAVLIST",n.data);case 9:return e.abrupt("return",n.data);case 12:throw e.prev=12,e.t0=e.catch(2),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function y(){return(y=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,j.a.get("http://dataservice.accuweather.com/forecasts/v1/daily/5day/".concat(t,"?apikey=a6G5iYMGG7hF7iiEnGgh41oa4pANsd46"));case 4:return a=e.sent,e.next=7,b.save("forecast",a.data);case 7:return e.abrupt("return",a.data);case 10:return e.prev=10,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",b.load("forecast"));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function w(e){var t=e.cities,a=e.loadCity;return t?t.map((function(e,t){return Object(n.jsxs)("li",{className:"flex align-center",onClick:function(){return a(e.Key,e.LocalizedName)},children:[e.LocalizedName,",",e.Country.LocalizedName]},e.Key+e.LocalizedName)})):null}var F={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e)+e)},dateFormatter:function(e){var t=new Date(e).toString(),a=t.substring(0,3),r=t.substring(4,8),c=t.substring(8,10);t.substring(15,21);return Object(n.jsx)("section",{children:Object(n.jsxs)("b",{children:[" ",a+", "+r+c]})})},dateFormat:function(e){var t=new Date(e).toString(),a=t.substring(0,3),n=t.substring(4,8),r=t.substring(8,10);t.substring(15,21);return a+", "+n+r}};var N=a(43),C=a.n(N),k=a(44),S=a.n(k);function I(e){var t=e.cityWeather.DailyForecasts;return t?t.map((function(e,t){if(+e.Night.Icon<10)var a="0";else a="";if(+e.Day.Icon<10)var r="0";else r="";var c=F.dateFormatter(e.Date);return Object(n.jsxs)("li",{className:"card flex column align-center",children:["  ",Object(n.jsxs)("div",{className:"flex column align-center",children:[Object(n.jsx)("span",{children:c}),Object(n.jsxs)("span",{className:"flex  align-center space-between",children:[Object(n.jsx)(C.a,{}),Object(n.jsx)("span",{children:e.Day.ShortPhrase})]}),Object(n.jsx)("img",{src:"https://developer.accuweather.com/sites/default/files/".concat(r).concat(e.Day.Icon,"-s.png")})]}),Object(n.jsxs)("div",{className:"card flex column align-center",children:[Object(n.jsxs)("span",{className:"flex align-center space-between",children:[Object(n.jsx)(S.a,{}),Object(n.jsx)("span",{children:e.Night.ShortPhrase})]}),Object(n.jsx)("img",{src:"https://developer.accuweather.com/sites/default/files/".concat(a).concat(e.Night.Icon,"-s.png")}),Object(n.jsxs)("span",{children:[e.Temperature.Minimum.Value," -  ",e.Temperature.Maximum.Value,"  ",Object(n.jsx)("span",{children:"\u2103"})]})]})]},e.Date)})):null}var D=a(30),M=a.n(D),A=a(29),E=a.n(A),L={removeFav:function(e){return B.apply(this,arguments)},addFav:function(e){return V.apply(this,arguments)},query:function(){return _.apply(this,arguments)}};function _(){return(_=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.load("favoriteCities");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.load("favoriteCities");case 2:if(a=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:a=a.filter((function(e){return e!==t}));case 8:return console.log(a),b.save("favoriteCities",a),e.abrupt("return",t);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.load("favoriteCities");case 2:return(a=e.sent)?a.push(t):(a=[]).push(t),b.save("favoriteCities",a),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return console.log("actions remove",e),function(t){L.removeFav(e).then((function(){t({type:"REMOVE_FAV",favId:e})}))}}function T(e){return console.log(e,"actions add"),function(t){L.addFav(e).then((function(e){t({type:"ADD_FAV",fav:e})}))}}window.favService=L;var z=a(15),J=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={cityWeather:{},cities:[],currCityId:"",isFav:!1,curCityname:""},e.loadCity=function(){var t=Object(l.a)(u.a.mark((function t(a){var n,r,c,s,i=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"TLV",t.next=3,g.getForecast(a);case 3:return r=t.sent,c=e.props.favs,s=c.includes(a),t.next=8,e.setState({cityWeather:r,currCityId:a,isFav:s,curCityname:n});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(){var t=Object(l.a)(u.a.mark((function t(a){var n,r,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.target.value,r=n,t.next=4,g.getCities(r);case 4:return c=t.sent,t.next=7,e.setState({cities:c});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.toggleFavorite=function(t){e.props.favs.includes(t)?(console.log("remove"),e.props.removeFav(t)):e.props.addFav(t),e.setState({isFav:!e.state.isFav})},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.loadCity("215854")}},{key:"render",value:function(){var e=this,t=this.state,a=t.cities,r=t.cityWeather,c=t.currCityId,s=t.isFav,i=t.curCityname;return r?Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"flex column align-center",children:[Object(n.jsxs)("label",{htmlFor:"title",className:"",children:[" ",Object(n.jsx)("input",{type:"text",placeholder:"Search",className:"title",name:"title",onChange:this.handleChange})]}),a.length>0&&Object(n.jsxs)("ul",{className:"cities",children:[" ",Object(n.jsx)(w,{cities:a,loadCity:this.loadCity})]})]}),Object(n.jsx)("h1",{children:i}),!s&&Object(n.jsx)(E.a,{onClick:function(){return e.toggleFavorite(c)}}),s&&Object(n.jsx)(M.a,{onClick:function(){return e.toggleFavorite(c)}}),Object(n.jsxs)("ul",{className:"card-grid ",children:[" ",Object(n.jsx)(I,{cityWeather:r})]})]}):Object(n.jsx)("label",{children:"load"})}}]),a}(r.Component),R={addFav:T,removeFav:G},W=Object(z.b)((function(e){return{favs:e.favsModule.favs}}),R)(J),P=a(19);function K(){return Object(n.jsxs)("header",{className:"main-header flex align-center space-between",children:[Object(n.jsx)("div",{className:"fs30 logo",children:"Weathter"}),Object(n.jsx)("nav",{className:"flex align-center space-between ",children:Object(n.jsxs)("ul",{className:"header-list flex align-center clean-list",children:[Object(n.jsxs)(P.b,{to:"/favorite",children:["  ",Object(n.jsx)("li",{className:"header-link",children:"Favorite"})]}),Object(n.jsxs)(P.b,{to:"/",children:["    ",Object(n.jsx)("li",{className:"header-link",children:"Home"})]})]})})]})}var U=a(4),Y=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={favList:[]},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.getfavs()}},{key:"getfavs",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,a,n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.favs,a=this.state.favList,n=a,r=0;case 4:if(!(r<=t.length-1)){e.next=13;break}return console.log(t[r]),e.next=8,g.getCitiesByID(t[r]);case 8:c=e.sent,n.push(c);case 10:r++,e.next=4;break;case 13:this.setState({favList:n});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.favList;return e.length<1?null:e.map((function(e,t){return Object(n.jsxs)("li",{className:"flex align-center",children:[e.LocalizedName,",",e.Country.LocalizedName]},e.Key+e.LocalizedName)}))}}]),a}(r.Component),q={addFav:T,removeFav:G},X=Object(z.b)((function(e){return{favs:e.favsModule.favs}}),q)(Y);var H=function(){return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(K,{}),Object(n.jsxs)(U.c,{children:[Object(n.jsx)(U.a,{component:X,path:"/favorite"}),Object(n.jsx)(U.a,{component:W,path:"/"})]})]})},Q=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,99)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))},Z=a(47),$=a(17),ee=a(48),te=a(10),ae=b.load("favoriteCities")||[];sessionStorage.loggedinUser&&JSON.parse(sessionStorage.loggedinUser);var ne={favs:ae};var re=Object($.c)({favsModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FAVS":return Object(te.a)(Object(te.a)({},e),{},{favs:t.favs});case"EDIT_FAV":var a=e.favs.map((function(e){return e._id===t.fav._id?t.fav:e}));return console.log(a),Object(te.a)(Object(te.a)({},e),{},{favs:a});case"ADD_FAV":return console.log("adding  fav",t.fav),e=Object(te.a)(Object(te.a)({},e),{},{favs:[].concat(Object(ee.a)(e.favs),[t.fav])});case"FILTER":var n=new RegExp(t.filterBy.text,"i");return e="All"===t.filterBy.type&&""===t.filterBy.text?Object(te.a)(Object(te.a)({},e),{},{favs:ae,filterBy:t.filterBy}):Object(te.a)(Object(te.a)({},e),{},{favs:ae.filter((function(e){return n.test(e.name)&&e.inStock===t.filterBy.type&&e.type===t.filterBy.type})),filterBy:t.filterBy});case"REMOVE_FAV":return console.log("removing  fav",t.fav),e=Object(te.a)(Object(te.a)({},e),{},{favs:e.favs.filter((function(e){return e!==t.favId}))});default:return e}}}),ce=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||$.d,se=Object($.e)(re,ce(Object($.a)(Z.a)));i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(P.a,{children:Object(n.jsx)(z.a,{store:se,children:Object(n.jsx)(H,{})})})}),document.getElementById("root")),Q()}},[[87,1,2]]]);
//# sourceMappingURL=main.1f8be3b3.chunk.js.map